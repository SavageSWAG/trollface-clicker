/* Базовые стили */
.background-image {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: url('background.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  z-index: -1;
}
body {
  font-family: 'Arial', sans-serif;
  margin: 0;
  padding: 0;
  background: linear-gradient(135deg, #4B0082, #8a2be2); /* Градиентный фон */
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  overflow: hidden;
  position: relative; /* Для правильного позиционирования */
  touch-action: manipulation; /* Предотвращаем зум на мобильных */
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

.app-container {
  text-align: center;
  position: relative;
  width: 100%;
  height: 100%;
  touch-action: manipulation;
}

h1 {
  color: #fff;
  font-size: 4rem;
  font-weight: bold;
  animation: textDeform 4s infinite alternate ease-in-out; /* Анимация деформации текста */
  z-index: 1;
}

@keyframes textDeform {
  0% {
    transform: scale(1) rotate(0deg);
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
  }
  50% {
    transform: scale(1.2) rotate(10deg);
    text-shadow: 4px 4px 10px rgba(0, 0, 0, 0.7);
  }
  100% {
    transform: scale(1) rotate(-10deg);
    text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.5);
  }
}

/* Анимация кнопки при нажатии */
button {
  margin-top: 20px;
  padding: 16px 32px;
  font-size: 20px;
  cursor: pointer;
  background-color: #ff6347;
  color: white;
  border: 2px solid #ff6347;
  border-radius: 12px;
  font-weight: bold;
  outline: none;
  transition: all 0.3s ease;
  -webkit-tap-highlight-color: rgba(0,0,0,0.1); /* Фикс для мобильных */
  touch-action: manipulation;
}

/* Убираем hover для обычных кнопок */
button:active {
  transform: scale(0.95);
}

/* ФИКС: Контейнер для картинки - адаптивный */
.trollface-container {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  outline: none;
  width: auto; /* Убираем фиксированную ширину */
  height: auto; /* Убираем фиксированную высоту */
  max-width: 90vw; /* Максимум 90% ширины экрана */
  max-height: 50vh; /* Максимум 50% высоты экрана */
  margin: 20px 0;
  
  /* ФИКСЫ ДЛЯ МОБИЛЬНЫХ - УБИРАЕМ ВЫДЕЛЕНИЕ */
  -webkit-tap-highlight-color: transparent !important;
  -webkit-user-select: none !important;
  -moz-user-select: none !important;
  -ms-user-select: none !important;
  user-select: none !important;
  -webkit-touch-callout: none !important;
  touch-action: manipulation;
  
  /* ФИКС: Убираем стандартные стили кнопки */
  appearance: none;
  -webkit-appearance: none;
}

/* ФИКС: Стили для картинки - адаптивные */
#trollface {
  width: auto; /* Автоматическая ширина */
  height: auto; /* Автоматическая высота */
  max-width: 100%; /* Не больше ширины контейнера */
  max-height: 100%; /* Не больше высоты контейнера */
  object-fit: contain; /* ВАЖНО: сохраняет пропорции, не обрезает */
  border-radius: 0%;
  transition: transform 0.1s ease; /* Быстрая анимация */
  
  /* ФИКС: Убираем mix-blend-mode и оставляем только нужные фиксы */
  background: transparent;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-user-drag: none;
  -webkit-touch-callout: none;
  pointer-events: none; /* Предотвращает события на самой картинке */
}

/* Анимация нажатия */
.trollface-container:hover #trollface {
  transform: scale(1.1);  /* Увеличение картинки при наведении */
}

/* ФИКС: Быстрая анимация нажатия */
.trollface-container:active #trollface {
  transform: scale(0.95);  /* Вдавливание картинки при нажатии */
  transition: transform 0.05s ease; /* Очень быстрая анимация */
}

/* ФИКС: Убираем любые следы выделения при активном состоянии */
.trollface-container:active,
.trollface-container:focus {
  background-color: transparent !important;
  outline: none !important;
  box-shadow: none !important;
}

/* ФИКС: Стиль для экрана - добавляем отступы */
.screen {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  position: relative;
  width: 100%;
  height: 100%;
  padding: 20px; /* Добавляем отступы */
  box-sizing: border-box; /* Чтобы padding не ломал размеры */
  touch-action: manipulation;
}

/* Анимация для плавного появления экрана */
#main-screen {
  animation: fadeIn 2s ease-in-out;
}

@keyframes fadeIn {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/* Анимация для движения картинки */
@keyframes moveTrollface {
  0% {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  100% {
    top: random;
    left: random;
    transform: translate(-50%, -50%);
  }
}

/* Стили для кнопки магазина */
#shop-button {
  position: fixed;
  left: 20px;
  bottom: 20px;
  padding: 10px 20px;
  background-color: #8a2be2;
  color: white;
  border-radius: 10px;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  transition: background-color 0.3s, transform 0.2s;
  -webkit-tap-highlight-color: rgba(138, 43, 226, 0.3);
  touch-action: manipulation;
  z-index: 1000;
}

/* Эффект hover для кнопки магазина */
#shop-button:hover {
  background-color: #4B0082;
  transform: scale(1.1); /* Увеличение кнопки при наведении */
}

/* Эффект active для кнопки магазина */
#shop-button:active {
  transform: scale(0.95); /* Вдавливание кнопки при нажатии */
}

/* Стили для кнопки "Начать троллить" */
#start-button {
  background-color: #ff6347;
  border: 2px solid #ff6347;
  -webkit-tap-highlight-color: rgba(255, 99, 71, 0.3);
}

/* ФИКС: Адаптивность для счетчика кликов */
#click-counter {
  font-size: clamp(1.5rem, 4vw, 3rem); /* Адаптивный размер шрифта */
  color: #fff;
  text-align: center;
  margin-bottom: 20px;
  font-weight: bold;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

/* Адаптивность */

/* Для экранов шириной меньше 768px (планшеты и мобильные устройства) */
@media (max-width: 768px) {
  h1 {
    font-size: 3rem; /* Меньший размер шрифта для заголовка */
  }

  button {
    font-size: 18px; /* Меньший размер шрифта для кнопки */
    padding: 12px 24px; /* Уменьшаем размер кнопок */
  }

  .trollface-container {
    max-width: 85vw; /* Увеличиваем максимальную ширину */
    max-height: 45vh; /* Увеличиваем максимальную высоту */
    margin: 15px 0;
  }

  #trollface {
    width: 100%; /* Картинка остается адаптивной */
    height: 100%;
  }

  #shop-button {
    padding: 8px 16px; /* Уменьшаем размеры кнопки магазина */
    font-size: 14px; /* Уменьшаем размер текста */
  }

  #click-counter {
    font-size: clamp(1.2rem, 5vw, 2rem); /* Более адаптивный размер */
    margin-bottom: 15px;
  }
}

/* Для экранов шириной меньше 480px (мобильные устройства) */
@media (max-width: 480px) {
  h1 {
    font-size: 2.5rem; /* Меньший размер шрифта для мобильных устройств */
  }

  button {
    font-size: 16px; /* Уменьшаем размер шрифта для кнопки */
    padding: 10px 20px; /* Уменьшаем размеры кнопки */
  }

  .trollface-container {
    max-width: 90vw; /* Еще больше на мобильных */
    max-height: 40vh; /* Немного меньше высоты */
    margin: 10px 0;
  }

  .screen {
    padding: 15px; /* Меньше отступы на мобильных */
  }

  #shop-button {
    padding: 6px 12px; /* Еще меньше кнопка магазина */
    font-size: 12px; /* Еще меньше размер текста */
    left: 10px;
    bottom: 10px;
  }

  #click-counter {
    font-size: clamp(1rem, 6vw, 1.5rem);
    margin-bottom: 10px;
  }
}

/* ФИКС: Для очень маленьких экранов по высоте */
@media (max-height: 600px) {
  .trollface-container {
    max-height: 35vh; /* Меньше высота на маленьких экранах */
  }
  
  .screen {
    padding: 10px;
    justify-content: space-around; /* Равномерное распределение */
  }
  
  #click-counter {
    margin-bottom: 5px;
  }
}

/* Убираем ховер эффекты на тач-устройствах */
@media (hover: none) and (pointer: coarse) {
  .trollface-container:hover #trollface {
    transform: none;
  }
  
  #shop-button:hover {
    transform: none;
    background-color: #8a2be2;
  }
  
  /* ФИКС: На мобильных убираем задержки */
  .trollface-container {
    touch-action: manipulation;
  }
}

/* ФИКС: Гарантируем, что HTML и body занимают всю высоту */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

/* Дополнительный фикс для iOS */
@supports (-webkit-touch-callout: none) {
  .trollface-container {
    -webkit-tap-highlight-color: transparent;
  }
}

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
  border-radius: 20px; /* Сглаженные рамки */
  padding: 0;
  width: 90%;
  max-width: 400px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
  border: 3px solid #8a2be2;
}

.modal-header {
  background: rgba(0, 0, 0, 0.3);
  padding: 20px;
  border-radius: 20px 20px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px solid #8a2be2;
}

.modal-header h2 {
  color: white;
  margin: 0;
  font-size: 1.5rem;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
}

.close-button {
  background: #ff4757;
  color: white;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  font-size: 20px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.close-button:hover {
  background: #ff3742;
  transform: scale(1.1);
}

.close-button:active {
  transform: scale(0.95);
}

.shop-items {
  padding: 20px;
}

.shop-item {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 15px;
  padding: 15px;
  margin-bottom: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border: 2px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
}

.shop-item:hover {
  background: rgba(255, 255, 255, 0.15);
  transform: translateY(-2px);
}

/* Обновляем стили для информации о товаре */
.item-info {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.item-name {
  color: white;
  font-weight: bold;
  font-size: 1.1rem;
  margin-bottom: 5px;
}

.item-description {
  color: #ccc;
  font-size: 0.8rem;
  opacity: 0.8;
}

.item-price {
  color: #ffd700;
  font-size: 0.9rem;
}

.buy-button {
  background: #ff6347;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 12px 15px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  min-width: 100px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  font-size: 0.9rem;
}

.buy-button:hover:not(:disabled) {
  background: #ff4757;
  transform: scale(1.05);
}

.buy-button:active:not(:disabled) {
  transform: scale(0.95);
}

.buy-button:disabled {
  background: #666;
  cursor: not-allowed;
  opacity: 0.6;
}

.buy-button.enough-money {
  background: #2ed573;
}

.buy-button.enough-money:hover:not(:disabled) {
  background: #25c464;
}

/* Стили для иконки в балансе */
.balance-info {
  background: rgba(0, 0, 0, 0.3);
  padding: 15px 20px;
  border-radius: 0 0 20px 20px;
  text-align: center;
  color: white;
  font-weight: bold;
  border-top: 2px solid #8a2be2;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
}

.balance-icon {
  width: 24px;
  height: 24px;
  object-fit: contain;
  vertical-align: middle;
  border-radius: 50%;
}

#shop-balance {
  color: #ffd700;
  font-size: 1.1em;
}

/* Стили для цены в кнопке */
.buy-price {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 0.8em;
  opacity: 0.9;
}

.price-icon {
  width: 16px;
  height: 16px;
  object-fit: contain;
  border-radius: 50%;
}

/* Адаптивность для магазина */
@media (max-width: 480px) {
  .balance-icon {
    width: 20px;
    height: 20px;
  }
  
  .shop-item {
    flex-direction: column;
    text-align: center;
    gap: 10px;
  }
  
  .buy-button {
    width: 100%;
    flex-direction: row;
    justify-content: center;
    gap: 10px;
  }
  
  .buy-price {
    font-size: 0.9em;
  }
  
  .price-icon {
    width: 18px;
    height: 18px;
  }
}

/* Стили для всплывающего уведомления */
.toast {
  position: fixed;
  top: 20px;
  right: 20px;
  background: linear-gradient(135deg, #2ed573, #25c464);
  color: white;
  padding: 0;
  border-radius: 15px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
  z-index: 2000;
  animation: slideInRight 0.3s ease, slideOutRight 0.3s ease 2s forwards;
  border: 2px solid #1e9050;
  max-width: 300px;
}

.toast-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 15px 20px;
  gap: 15px;
}

.toast-message {
  font-weight: bold;
  font-size: 1rem;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}

.toast-close {
  background: rgba(255, 255, 255, 0.2);
  color: white;
  border: none;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  font-size: 16px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  flex-shrink: 0;
}

.toast-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

/* Анимации для toast */
@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%);
    opacity: 0;
  }
}

/* Адаптивность для toast */
@media (max-width: 480px) {
  .toast {
    top: 10px;
    right: 10px;
    left: 10px;
    max-width: none;
    animation: slideInTop 0.3s ease, slideOutTop 0.3s ease 2s forwards;
  }
  
  @keyframes slideInTop {
    from {
      transform: translateY(-100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }
  
  @keyframes slideOutTop {
    from {
      transform: translateY(0);
      opacity: 1;
    }
    to {
      transform: translateY(-100%);
      opacity: 0;
    }
  }
}